openapi: '3.0.3'
info:
  version: 1.0.0
  title: DENA-BMIL
  description: Documentation for the KILT BMIL application
tags:
  - name: Identity
  - name: Claiming
paths:
  /identity:
    post:
      tags:
        - Identity
      description: Endpoint to generate and store a new Identity.
      responses:
        '200':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Identity'
    get:
      tags:
        - Identity
      description: Endpoint to get stored Identity address.
      responses:
        '200':
          description: Returns the stored Identitiy address.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Identity'
  /identity/register:
    post:
      tags: [Identity]
      description: Registers the stored Identity as a DID.
      responses:
        '200':
          description: DID registered
          content:
            application/json:
              examples:
                DDO:
                  $ref: '#/components/examples/DDO'
  /claim:
    post:
      tags: [Claiming]
      description: Generates a Claim and sends a RequestForAttestation to an Attester.
      responses:
        '200':
          description: Claim successfully generated and sent to the attester.

components:
  schemas:    
    Identity:
      type: string
      example: '4rAPNc2DPmbL1MWyQxPmaR5TTYta9jexdnLMY34AA32UFpeY'
  examples:
    DDO:
      value:
        id: 'did:kilt:4rAPNc2DPmbL1MWyQxPmaR5TTYta9jexdnLMY34AA32UFpeY'
        '@context': 'https://w3id.org/did/v1'
        authentication:
          - publicKey:
              - 'did:kilt:4rAPNc2DPmbL1MWyQxPmaR5TTYta9jexdnLMY34AA32UFpeY#key-1'
            type: Ed25519SignatureAuthentication2018
        publicKey:
          - controller: 'did:kilt:4rAPNc2DPmbL1MWyQxPmaR5TTYta9jexdnLMY34AA32UFpeY'
            id: 'did:kilt:4rAPNc2DPmbL1MWyQxPmaR5TTYta9jexdnLMY34AA32UFpeY#key-1'
            publicKeyHex: '0x8fa094c521c982567063e0a648369e4b666f669d4ddfa903a048bb6e2c3f1ec6'
            type: Ed25519VerificationKey2018
          - controller: 'did:kilt:4rAPNc2DPmbL1MWyQxPmaR5TTYta9jexdnLMY34AA32UFpeY'
            id: 'did:kilt:4rAPNc2DPmbL1MWyQxPmaR5TTYta9jexdnLMY34AA32UFpeY#key-2'
            publicKeyHex: '0xf4e6a9dce42e748621405998e360c354f6cab5430d459291f92a024e42572b0f'
            type: X25519Salsa20Poly1305Key2018
        service:
          - serviceEndpoint: 'https://services.kilt.io/messaging'
            type: KiltMessagingService
      

